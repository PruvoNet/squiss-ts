
<!doctype html>
<html>
  <head>
    <link href="images/favicon-58aae222.ico" rel="icon" type="image/ico" />
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Squiss-TS Documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nn {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nl {
  color: #ffffff;
  background-color: #272822;
}
.highlight .ni {
  color: #ffffff;
  background-color: #272822;
}
.highlight .bp {
  color: #ffffff;
  background-color: #272822;
}
.highlight .vg {
  color: #ffffff;
  background-color: #272822;
}
.highlight .vi {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
  background-color: #272822;
}
.highlight .w {
  color: #ffffff;
  background-color: #272822;
}
.highlight {
  color: #ffffff;
  background-color: #272822;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
  background-color: #272822;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-3fba7a43.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-788e728f.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-17f24576.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        MENU
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <a href="#">
        <img src="images/logo-92830d8b.png" class="logo" alt="" />
      </a>
        <div class="search">
          <input type="search" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#abstract" class="toc-h2 toc-link" data-title="Abstract">Abstract</a>
                  </li>
                  <li>
                    <a href="#main-features" class="toc-h2 toc-link" data-title="Main features">Main features</a>
                  </li>
                  <li>
                    <a href="#how-it-works" class="toc-h2 toc-link" data-title="How it works">How it works</a>
                  </li>
                  <li>
                    <a href="#versioning" class="toc-h2 toc-link" data-title="Versioning">Versioning</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#squiss-class" class="toc-h1 toc-link" data-title="Squiss Class">Squiss Class</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#properties" class="toc-h2 toc-link" data-title="Properties">Properties</a>
                  </li>
                  <li>
                    <a href="#constructor-options" class="toc-h2 toc-link" data-title="Constructor Options">Constructor Options</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#aws-options" class="toc-h3 toc-link" data-title="Aws Options">Aws Options</a>
                          </li>
                          <li>
                            <a href="#queue-options" class="toc-h3 toc-link" data-title="Queue Options">Queue Options</a>
                          </li>
                          <li>
                            <a href="#visibilitytimeoutsecs" class="toc-h3 toc-link" data-title="visibilityTimeoutSecs">visibilityTimeoutSecs</a>
                          </li>
                          <li>
                            <a href="#auto-extend-options" class="toc-h3 toc-link" data-title="Auto Extend Options">Auto Extend Options</a>
                          </li>
                          <li>
                            <a href="#gzip-options" class="toc-h3 toc-link" data-title="Gzip Options">Gzip Options</a>
                          </li>
                          <li>
                            <a href="#s3-options" class="toc-h3 toc-link" data-title="S3 Options">S3 Options</a>
                          </li>
                          <li>
                            <a href="#delete-options" class="toc-h3 toc-link" data-title="Delete options">Delete options</a>
                          </li>
                          <li>
                            <a href="#polling-options" class="toc-h3 toc-link" data-title="Polling Options">Polling Options</a>
                          </li>
                          <li>
                            <a href="#formatting-options" class="toc-h3 toc-link" data-title="Formatting Options">Formatting Options</a>
                          </li>
                          <li>
                            <a href="#attributes-options" class="toc-h3 toc-link" data-title="Attributes Options">Attributes Options</a>
                          </li>
                          <li>
                            <a href="#queue-create-options" class="toc-h3 toc-link" data-title="Queue Create Options">Queue Create Options</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#methods" class="toc-h2 toc-link" data-title="Methods">Methods</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#lifecycle-methods" class="toc-h3 toc-link" data-title="Lifecycle Methods">Lifecycle Methods</a>
                          </li>
                          <li>
                            <a href="#message-methods" class="toc-h3 toc-link" data-title="Message Methods">Message Methods</a>
                          </li>
                          <li>
                            <a href="#queue-methods" class="toc-h3 toc-link" data-title="Queue Methods">Queue Methods</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#events" class="toc-h2 toc-link" data-title="Events">Events</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#queue-events" class="toc-h3 toc-link" data-title="Queue Events">Queue Events</a>
                          </li>
                          <li>
                            <a href="#message-events" class="toc-h3 toc-link" data-title="Message Events">Message Events</a>
                          </li>
                          <li>
                            <a href="#s3-events" class="toc-h3 toc-link" data-title="S3 Events">S3 Events</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#message-class" class="toc-h1 toc-link" data-title="Message Class">Message Class</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#properties" class="toc-h2 toc-link" data-title="Properties">Properties</a>
                  </li>
                  <li>
                    <a href="#methods" class="toc-h2 toc-link" data-title="Methods">Methods</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#parse-promise-lt-string-any-gt" class="toc-h3 toc-link" data-title="parse(): Promise&lt;string | any&gt;">parse(): Promise&lt;string | any&gt;</a>
                          </li>
                          <li>
                            <a href="#ishandled-boolean" class="toc-h3 toc-link" data-title="isHandled(): boolean">isHandled(): boolean</a>
                          </li>
                          <li>
                            <a href="#del-promise-lt-void-gt" class="toc-h3 toc-link" data-title="del(): Promise&lt;void&gt;">del(): Promise&lt;void&gt;</a>
                          </li>
                          <li>
                            <a href="#keep-void" class="toc-h3 toc-link" data-title="keep(): void">keep(): void</a>
                          </li>
                          <li>
                            <a href="#release-promise-lt-void-gt" class="toc-h3 toc-link" data-title="release(): Promise&lt;void&gt;">release(): Promise&lt;void&gt;</a>
                          </li>
                          <li>
                            <a href="#changevisibility-timeoutinseconds-number-promise-lt-void-gt" class="toc-h3 toc-link" data-title="changeVisibility(timeoutInSeconds: number): Promise&lt;void&gt;">changeVisibility(timeoutInSeconds: number): Promise&lt;void&gt;</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#events" class="toc-h2 toc-link" data-title="Events">Events</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#lifecycle-events" class="toc-h3 toc-link" data-title="Lifecycle Events">Lifecycle Events</a>
                          </li>
                          <li>
                            <a href="#timeout-events" class="toc-h3 toc-link" data-title="Timeout Events">Timeout Events</a>
                          </li>
                          <li>
                            <a href="#s3-events" class="toc-h3 toc-link" data-title="S3 Events">S3 Events</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#support" class="toc-h1 toc-link" data-title="Support">Support</a>
          </li>
          <li>
            <a href="#credits" class="toc-h1 toc-link" data-title="Credits">Credits</a>
          </li>
          <li>
            <a href="#contributors" class="toc-h1 toc-link" data-title="Contributors">Contributors</a>
          </li>
          <li>
            <a href="#changelog" class="toc-h1 toc-link" data-title="Changelog">Changelog</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#development" class="toc-h2 toc-link" data-title="Development">Development</a>
                  </li>
                  <li>
                    <a href="#v5-2-2" class="toc-h2 toc-link" data-title="v5.2.2">v5.2.2</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v5-2-1" class="toc-h2 toc-link" data-title="v5.2.1">v5.2.1</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-2" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v5-2-0" class="toc-h2 toc-link" data-title="v5.2.0">v5.2.0</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#added" class="toc-h3 toc-link" data-title="Added">Added</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v5-1-0" class="toc-h2 toc-link" data-title="v5.1.0">v5.1.0</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#added-2" class="toc-h3 toc-link" data-title="Added">Added</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v5-0-0" class="toc-h2 toc-link" data-title="v5.0.0">v5.0.0</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#breaking-changes" class="toc-h3 toc-link" data-title="BREAKING CHANGES">BREAKING CHANGES</a>
                          </li>
                          <li>
                            <a href="#fixed-3" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                          <li>
                            <a href="#added-3" class="toc-h3 toc-link" data-title="Added">Added</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-4-1" class="toc-h2 toc-link" data-title="v4.4.1">v4.4.1</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-4" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-4-0" class="toc-h2 toc-link" data-title="v4.4.0">v4.4.0</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-5" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-1-1" class="toc-h2 toc-link" data-title="v4.1.1">v4.1.1</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-6" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-1-0" class="toc-h2 toc-link" data-title="v4.1.0">v4.1.0</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-7" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-0-10" class="toc-h2 toc-link" data-title="v4.0.10">v4.0.10</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-8" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-0-9" class="toc-h2 toc-link" data-title="v4.0.9">v4.0.9</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-9" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-0-8" class="toc-h2 toc-link" data-title="v4.0.8">v4.0.8</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-10" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-0-7" class="toc-h2 toc-link" data-title="v4.0.7">v4.0.7</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-11" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-0-6" class="toc-h2 toc-link" data-title="v4.0.6">v4.0.6</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-12" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-0-5" class="toc-h2 toc-link" data-title="v4.0.5">v4.0.5</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-13" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-0-4" class="toc-h2 toc-link" data-title="v4.0.4">v4.0.4</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-14" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-0-3" class="toc-h2 toc-link" data-title="v4.0.3">v4.0.3</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-15" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-0-2" class="toc-h2 toc-link" data-title="v4.0.2">v4.0.2</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-16" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-0-1" class="toc-h2 toc-link" data-title="v4.0.1">v4.0.1</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-17" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                          <li>
                            <a href="#added-4" class="toc-h3 toc-link" data-title="Added">Added</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v4-0-0" class="toc-h2 toc-link" data-title="v4.0.0">v4.0.0</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-18" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                          <li>
                            <a href="#added-5" class="toc-h3 toc-link" data-title="Added">Added</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v3-0-1" class="toc-h2 toc-link" data-title="v3.0.1">v3.0.1</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-19" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                          <li>
                            <a href="#added-6" class="toc-h3 toc-link" data-title="Added">Added</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v3-0-0" class="toc-h2 toc-link" data-title="v3.0.0">v3.0.0</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#added-7" class="toc-h3 toc-link" data-title="Added">Added</a>
                          </li>
                          <li>
                            <a href="#fixed-20" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v2-0-0" class="toc-h2 toc-link" data-title="v2.0.0">v2.0.0</a>
                  </li>
                  <li>
                    <a href="#v1-5-2" class="toc-h2 toc-link" data-title="v1.5.2">v1.5.2</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-21" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v1-5-1" class="toc-h2 toc-link" data-title="v1.5.1">v1.5.1</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-22" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v1-5-0" class="toc-h2 toc-link" data-title="v1.5.0">v1.5.0</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#added-8" class="toc-h3 toc-link" data-title="Added">Added</a>
                          </li>
                          <li>
                            <a href="#fixed-23" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v1-4-0" class="toc-h2 toc-link" data-title="v1.4.0">v1.4.0</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#added-9" class="toc-h3 toc-link" data-title="Added">Added</a>
                          </li>
                          <li>
                            <a href="#fixed-24" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v1-3-0" class="toc-h2 toc-link" data-title="v1.3.0">v1.3.0</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#added-10" class="toc-h3 toc-link" data-title="Added">Added</a>
                          </li>
                          <li>
                            <a href="#fixed-25" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v1-2-4" class="toc-h2 toc-link" data-title="v1.2.4">v1.2.4</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-26" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v1-2-3" class="toc-h2 toc-link" data-title="v1.2.3">v1.2.3</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-27" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v1-2-2" class="toc-h2 toc-link" data-title="v1.2.2">v1.2.2</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-28" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v1-2-1" class="toc-h2 toc-link" data-title="v1.2.1">v1.2.1</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-29" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v1-2-0" class="toc-h2 toc-link" data-title="v1.2.0">v1.2.0</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#added-11" class="toc-h3 toc-link" data-title="Added">Added</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v1-1-0" class="toc-h2 toc-link" data-title="v1.1.0">v1.1.0</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fixed-30" class="toc-h3 toc-link" data-title="Fixed">Fixed</a>
                          </li>
                          <li>
                            <a href="#added-12" class="toc-h3 toc-link" data-title="Added">Added</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#v1-0-0" class="toc-h2 toc-link" data-title="v1.0.0">v1.0.0</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#added-13" class="toc-h3 toc-link" data-title="Added">Added</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a target="_blank" href='https://github.com/PruvoNet/squiss-ts'>Github Repo</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='overview'>Overview</h1>
<p><a href="https://www.npmjs.com/package/squiss-ts"><img src="https://img.shields.io/npm/v/squiss-ts.svg?style=popout" alt="Npm Version" /></a>
<a href="https://travis-ci.com/PruvoNet/squiss-ts"><img src="https://img.shields.io/node/v-lts/squiss-ts" alt="node" /></a>
<a href="https://travis-ci.com/PruvoNet/squiss-ts"><img src="https://github.com/PruvoNet/squiss-ts/actions/workflows/ci.yml/badge.svg?branch=master" alt="Build Status" /></a>
<a href="https://codeclimate.com/github/PruvoNet/squiss-ts/test_coverage"><img src="https://api.codeclimate.com/v1/badges/177b18abdb55fdf90cf8/test_coverage" alt="Test Coverage" /></a>
<a href="https://codeclimate.com/github/PruvoNet/squiss-ts/maintainability"><img src="https://api.codeclimate.com/v1/badges/177b18abdb55fdf90cf8/maintainability" alt="Maintainability" /></a>
<a href="https://snyk.io/test/github/PruvoNet/squiss-ts?targetFile=package.json"><img src="https://snyk.io/test/github/PruvoNet/squiss-ts/badge.svg?targetFile=package.json" alt="Known Vulnerabilities" /></a></p>
<h2 id='abstract'>Abstract</h2>
<blockquote>
<p>Install</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>npm <span class="nb">install </span>squiss-ts
</code></pre></div>
<p>High-volume Amazon SQS Poller and single-queue client for Node.js 16 and up with full typescript support<br>
The library is production ready and is being stress used in a full-blown production environment</p>
<h2 id='main-features'>Main features</h2>
<blockquote>
<p>Quick example</p>
</blockquote>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Squiss</span><span class="p">,</span> <span class="nx">Message</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">squiss-ts</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">awsConfig</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">credentials</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">accessKeyId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">accessKeyId</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">secretAccessKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">secretAccessKey</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">region</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;region&gt;</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">squiss</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Squiss</span><span class="p">({</span>
  <span class="nx">awsConfig</span><span class="p">,</span>
  <span class="na">queueName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">my-sqs-queue</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">bodyFormat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">json</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">maxInFlight</span><span class="p">:</span> <span class="mi">15</span>
<span class="p">});</span>

<span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="nx">Message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">message</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2"> says: </span><span class="p">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">message</span><span class="p">)}</span><span class="s2"> and has attripute p1 with value </span><span class="p">${</span><span class="nx">message</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">p1</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="nx">message</span><span class="p">.</span><span class="nx">del</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">squiss</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">messageToSend</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">messageName</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">message</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="na">b</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">propsToSend</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">p1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">p2</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">squiss</span><span class="p">.</span><span class="nx">sendMessage</span><span class="p">(</span><span class="nx">messageToSend</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">propsToSend</span><span class="p">);</span>
</code></pre></div>
<ul>
<li>Control how many messages can be handled at any given point</li>
<li>Efficiently auto pull new messages when concurrency is not fully utilized</li>
<li>Easy message lifecycle management</li>
<li>Options to auto renew messages visibility timeout for long message processing</li>
<li>Option to automatically gzip incoming and outgoing messages (based on message size) to decrease message sizes and save SQS costs</li>
<li>Option to auto upload large messages to s3 and retrieve the message from s3 upon receive, in order to decrease message size,
save SQS costs and be able to send messages bigger than SQS message size limit</li>
<li>Full typescript support</li>
</ul>
<h2 id='how-it-works'>How it works</h2>
<p>Squiss processes as many messages simultaneously as possible.<br>
Set the <a href="#squiss-class-constructor-options-polling-options-maxinflight">maxInFlight</a> option to the number of messages your app can handle at one time without choking, and Squiss will keep
that many messages flowing through your app, grabbing more as you mark each message as handled or ready for deletion.<br>
If the queue is empty, Squiss will maintain an open connection to SQS, waiting for any messages that appear in real time.<br>
Squiss can also handle renewing the visibility timeout for your messages until you handle the message, or message handling time 
(set up by you) has passed (see <a href="#squiss-class-constructor-options-auto-extend-options">autoExtendTimeout</a>).<br>
Bonus: Squiss will also automatically handle the message attributes formatting and parsing when receiving and sending messages. </p>
<h2 id='versioning'>Versioning</h2>
<p>This project adheres to <a href="http://semver.org/">Semantic Versioning</a></p>

<p>Current version</p>

<p><a href="https://www.npmjs.com/package/squiss-ts"><img src="https://img.shields.io/npm/v/squiss-ts.svg?style=popout" alt="Npm Version" /></a></p>
<h1 id='squiss-class'>Squiss Class</h1><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Squiss</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">squiss-ts</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">awsConfig</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">credentials</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">accessKeyId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">accessKeyId</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">secretAccessKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">secretAccessKey</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">region</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;region&gt;</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">squiss</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Squiss</span><span class="p">({</span>
  <span class="nx">awsConfig</span><span class="p">,</span>
  <span class="na">queueName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">my-sqs-queue</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">bodyFormat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">json</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">maxInFlight</span><span class="p">:</span> <span class="mi">15</span>
<span class="p">});</span>
</code></pre></div>
<p>Queue message poller (<code>EventEmitter</code>)</p>
<h2 id='properties'>Properties</h2>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>inFlight</code></td>
<td>number</td>
<td>The number of messages currently in flight</td>
</tr>
<tr>
<td><code>running</code></td>
<td>boolean</td>
<td>Whether Squiss is currently polling or not</td>
</tr>
<tr>
<td><code>sqs</code></td>
<td>SQS</td>
<td>The SQS model used</td>
</tr>
</tbody></table>
<h2 id='constructor-options'>Constructor Options</h2>
<aside class="notice">
Squiss's defaults are great out of the box for most use cases, 
but you can use the below to fine-tune your Squiss experience
</aside>
<h3 id='aws-options'>Aws Options</h3><h4 id='awsconfig'>awsConfig</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kd">const</span> <span class="nx">awsConfig</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">credentials</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">accessKeyId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">accessKeyId</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">secretAccessKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">secretAccessKey</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">region</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;region&gt;</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div>
<p>An object mapping to pass to the SQS constructor, configuring the <code>@aws-sdk/client-sqs</code> library.<br>
This is commonly used to set the AWS region, endpoint, or the user credentials.<br>
See the docs on <a href="https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/clients/client-sqs/">configuring client-sqs</a> for details.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>SQS.Types.ClientConfiguration</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
</tbody></table>
<h4 id='sqs'>SQS</h4>
<p>An instance of the official SQS Client, or an SQS constructor function to use rather than the
default one provided by <code>@aws-sdk/client-sqs</code></p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>AWS.SQS  &#124; Object typeof AWS.SQS</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>AWS.SQS</code></td>
</tr>
</tbody></table>
<h4 id='s3'>S3</h4>
<p>An instance of the official S3 Client, or an S3 constructor function to use rather than the
default one provided by <code>@aws-sdk/client-s3</code></p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>AWS.S3  &#124; Object typeof AWS.S3</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>AWS.S3</code></td>
</tr>
</tbody></table>
<h3 id='queue-options'>Queue Options</h3><h4 id='queuename'>queueName</h4>
<p>The name of the queue to be polled.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>string</td>
</tr>
<tr>
<td>Mandatory</td>
<td>True if <a href="#squiss-class-constructor-options-queue-options-queueurl">queueUrl</a> is not specified</td>
</tr>
</tbody></table>
<h4 id='queueurl'>queueUrl</h4>
<p>The URL of the queue to be polled.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>string</td>
</tr>
<tr>
<td>Mandatory</td>
<td>True if <a href="#squiss-class-constructor-options-queue-options-queuename">queueName</a> is not specified</td>
</tr>
</tbody></table>
<h4 id='accountnumber'>accountNumber</h4>
<p>If <a href="#squiss-class-constructor-options-queue-options-queuename">queueName</a> is specified, the <code>accountNumber</code> of the 
queue owner can optionally be specified to access a queue in a different AWS account.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>string &#124; number</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
</tbody></table>
<h4 id='correctqueueurl'>correctQueueUrl</h4>
<p>Changes the protocol, host, and port of the queue URL to match the configured SQS endpoint (see <a href="#squiss-class-constructor-options-aws-options-awsconfig">awsConfig</a>),
applicable only if <a href="#squiss-class-constructor-options-queue-options-queuename">queueName</a> is specified.<br>
This can be useful for testing against a local SQS service, such as ElasticMQ.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>boolean</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>false</code></td>
</tr>
</tbody></table>
<h3 id='visibilitytimeoutsecs'>visibilityTimeoutSecs</h3>
<p>The amount of time, in seconds, that received messages will be unavailable to other squiss instances without
being deleted.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td>queue setting on read, or 30 seconds for <a href="#squiss-class-methods-queue-methods-createqueue-promise-lt-string-gt">createQueue()</a></td>
</tr>
</tbody></table>
<h3 id='auto-extend-options'>Auto Extend Options</h3>
<p>Squiss can automatically extend each message&#39;s <code>VisibilityTimeout</code> in the SQS queue until
it&#39;s handled (by keeping, deleting, or releasing it).<br>
It will place the API call to extend the timeout <a href="#squiss-class-constructor-options-auto-extend-options-advancedcallms">advancedCallMs</a> milliseconds in advance of the expiration,
and will extend it by the number of seconds specified in <a href="#squiss-class-constructor-options-visibilitytimeoutsecs">visibilityTimeoutSecs</a>.<br>
If  <a href="#squiss-class-constructor-options-visibilitytimeoutsecs">visibilityTimeoutSecs</a> is not specified, the <code>VisibilityTimeout</code> setting on the queue itself will be used.</p>
<h4 id='autoextendtimeout'>autoExtendTimeout</h4>
<p>Enable the message auto extend feature</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>boolean</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>false</code></td>
</tr>
</tbody></table>
<h4 id='noextensionsaftersecs'>noExtensionsAfterSecs</h4>
<p>If <a href="#squiss-class-constructor-options-auto-extend-options-autoextendtimeout">autoExtendTimeout</a> is used, Squiss will
stop auto-renewing a message&#39;s <code>VisibilityTimeout</code> when it reaches this age. Default is 12 hours - SQS&#39;s <code>VisbilityTimeout</code> maximum.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>43200</code></td>
</tr>
</tbody></table>
<h4 id='advancedcallms'>advancedCallMs</h4>
<p>If <a href="#squiss-class-constructor-options-auto-extend-options-autoextendtimeout">autoExtendTimeout</a> is used, this is the number
of milliseconds that Squiss will make the call to extend the <code>VisibilityTimeout</code> of the message, before the message is set to expire.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>5000</code></td>
</tr>
</tbody></table>
<h3 id='gzip-options'>Gzip Options</h3>
<p>You can gzip the messages, which will reduce the message size, thus enabling you to send large messages, 
and also reduce the cost of those message.<br>
You can optionally gzip only if a min message size criteria is met (<a href="#squiss-class-constructor-options-gzip-options-mingzipsize">minGzipSize</a>), to reduce compute overhead.</p>
<h4 id='gzip'>gzip</h4>
<p>Auto gzip messages to reduce message size.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>boolean</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>false</code></td>
</tr>
</tbody></table>
<h4 id='mingzipsize'>minGzipSize</h4>
<p>The min message size to gzip (in bytes) when <a href="#squiss-class-constructor-options-gzip-options-gzip">gzip</a> is set to <code>true</code>.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>0</code></td>
</tr>
</tbody></table>
<h3 id='s3-options'>S3 Options</h3><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kd">const</span> <span class="nx">s3Options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">s3Fallback</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">s3Bucket</span><span class="p">:</span> <span class="dl">'</span><span class="s1">squiss-bucket</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">s3Retain</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">s3Prefix</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">queueName</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
  <span class="na">minS3Size</span><span class="p">:</span> <span class="mi">64000</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div>
<p>you can upload the messages body to S3 and replace the message with just the reference to the created blob.<br>
This will reduce the message size, thus enabling you to send large messages, 
and also reduce the cost of those messages.  </p>
<h4 id='s3fallback'>s3Fallback</h4>
<p>Upload messages bigger than <a href="#squiss-class-constructor-options-s3-options-mins3size">minS3Size</a> or queue default
<a href="#squiss-class-constructor-options-queue-create-options-maxmessagebytes">maxMessageBytes</a> to S3,
and retrieve it from there when message is received.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>boolean</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>false</code></td>
</tr>
</tbody></table>
<h4 id='s3bucket'>s3Bucket</h4>
<p>if <a href="#squiss-class-constructor-options-s3-options-s3fallback">s3Fallback</a> is set to <code>true</code>, upload message to this S3 bucket.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>string</td>
</tr>
<tr>
<td>Mandatory</td>
<td>True if <a href="#squiss-class-constructor-options-s3-options-s3fallback">s3Fallback</a> is set to <code>true</code></td>
</tr>
</tbody></table>
<h4 id='s3retain'>s3Retain</h4>
<p>if <a href="#squiss-class-constructor-options-s3-options-s3fallback">s3Fallback</a> is true, do not delete blob on message delete.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>boolean</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>false</code></td>
</tr>
</tbody></table>
<h4 id='mins3size'>minS3Size</h4>
<p>The min message size to send to S3 (in bytes) when <a href="#squiss-class-constructor-options-s3-options-s3fallback">s3Fallback</a> is set to <code>true</code>.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td>queue max message size</td>
</tr>
</tbody></table>
<h4 id='s3prefix'>s3Prefix</h4>
<p>if <a href="#squiss-class-constructor-options-s3-options-s3fallback">s3Fallback</a> is set to <code>true</code>, set this prefix to uploaded S3 blobs.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>string</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td>&quot;&quot;</td>
</tr>
</tbody></table>
<h3 id='delete-options'>Delete options</h3><h4 id='deletebatchsize'>deleteBatchSize</h4>
<p>The number of messages to delete at one time.<br>
Squiss will trigger a batch delete when this limit is reached, or when <a href="#squiss-class-constructor-options-delete-options-deletewaitms">deleteWaitMs</a> 
milliseconds have passed since the first queued delete, whichever comes first.<br>
Set to 1 to make all deletes immediate.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number (max 10)</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>10</code></td>
</tr>
</tbody></table>
<h4 id='deletewaitms'>deleteWaitMs</h4>
<p>The number of milliseconds to wait after the first queued message deletion before deleting the message(s) from SQS.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>2000</code></td>
</tr>
</tbody></table>
<h3 id='polling-options'>Polling Options</h3><h4 id='activepollintervalms'>activePollIntervalMs</h4>
<p>The number of milliseconds to wait between requesting batches of messages when the queue is not empty,
and the <a href="#squiss-class-constructor-options-polling-options-maxinflight">maxInFlight</a> cap has not been hit.<br>
For most use cases, it&#39;s better to leave this at 0 and let Squiss manage the active polling frequency
according to <a href="#squiss-class-constructor-options-polling-options-maxinflight">maxInFlight</a>.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>0</code></td>
</tr>
</tbody></table>
<h4 id='idlepollintervalms'>idlePollIntervalMs</h4>
<p>The number of milliseconds to wait before requesting a batch of messages when the queue was empty in the prior request.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>0</code></td>
</tr>
</tbody></table>
<h4 id='maxinflight'>maxInFlight</h4>
<p>The number of messages to keep &quot;in-flight&quot;, or processing simultaneously.<br>
When this cap is reached, no more messages will be polled until currently in-flight messages are marked as deleted or handled.<br>
Setting this option to 0 will uncap your in flight messages, 
pulling and delivering messages as long as there are messages to pull.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>100</code></td>
</tr>
</tbody></table>
<h4 id='pollretryms'>pollRetryMs</h4>
<p>The number of milliseconds to wait before retrying when Squiss&#39;s call to retrieve messages from SQS fails.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>2000</code></td>
</tr>
</tbody></table>
<h4 id='receivebatchsize'>receiveBatchSize</h4>
<p>The number of messages to receive at one time.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number (max 10 or <a href="#squiss-class-constructor-options-polling-options-maxinflight">maxInFlight</a>)</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>10</code></td>
</tr>
</tbody></table>
<h4 id='minreceivebatchsize'>minReceiveBatchSize</h4>
<p>The minimum number of available message slots that will initiate a call to get the next batch.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number (max 10 or <a href="#squiss-class-constructor-options-polling-options-maxinflight">maxInFlight</a>, whichever is lower)</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>1</code></td>
</tr>
</tbody></table>
<h4 id='receivewaittimesecs'>receiveWaitTimeSecs</h4>
<p>The number of seconds for which to hold open the SQS call to receive messages, when no message is currently available.<br>
It is recommended to set this high, as Squiss will re-open the receiveMessage HTTP request as soon as the last
one ends. 
If this needs to be set low, consider setting <a href="#squiss-class-constructor-options-polling-options-activepollintervalms">activePollIntervalMs</a> to space out calls to SQS.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number (max 20)</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>20</code></td>
</tr>
</tbody></table>
<h3 id='formatting-options'>Formatting Options</h3><h4 id='bodyformat'>bodyFormat</h4>
<p>The format of the incoming message.<br>
Set to &quot;json&quot; to automatically call <code>JSON.parse()</code> on each incoming message.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>&#39;json&#39; &#124; &#39;plain&#39;</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>plain</code></td>
</tr>
</tbody></table>
<h4 id='unwrapsns'>unwrapSns</h4>
<p>Set to <code>true</code> to denote that Squiss should treat each message as though it comes from a queue subscribed to an
SNS endpoint, and automatically extract the message from the SNS metadata wrapper.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>boolean</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>false</code></td>
</tr>
</tbody></table>
<h3 id='attributes-options'>Attributes Options</h3><h4 id='receiveattributes'>receiveAttributes</h4>
<p>An an array of strings with attribute names (e.g. <code>myAttribute</code>) to request along with the <code>SQS.receiveMessage()</code> call.<br>
The attributes will be accessible via <code>message.attributes.&lt;attributeName&gt;</code>.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>string[]</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>[&#39;All&#39;]</code></td>
</tr>
</tbody></table>
<h4 id='receivesqsattributes'>receiveSqsAttributes</h4>
<p>An an array of strings with attribute names (e.g. <code>ApproximateReceiveCount</code>) to request along with
the <code>SQS.receiveMessage()</code> call.<br>
The attributes will be accessible via <code>message.sqsAttributes.&lt;attributeName&gt;</code>.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>string[]</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>[&#39;All&#39;]</code></td>
</tr>
</tbody></table>
<h3 id='queue-create-options'>Queue Create Options</h3>
<p>Are you using Squiss to create your queue as well? Squiss will use <a href="#squiss-class-constructor-options-polling-options-receivewaittimesecs">receiveWaitTimeSecs</a> and 
<a href="#squiss-class-constructor-options-visibilitytimeoutsecs">visibilityTimeoutSecs</a> in the queue create options, but consider setting any of the 
following options to configure it further. </p>

<aside class="notice">
Note that the defaults are the same as Amazon's own defaults.
</aside>
<h4 id='delaysecs'>delaySecs</h4>
<p>The number of milliseconds by which to delay the delivery of new messages into the queue by default.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>0</code></td>
</tr>
</tbody></table>
<h4 id='maxmessagebytes'>maxMessageBytes</h4>
<p>The maximum size of a single message, in bytes, that the queue can support.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>262144</code> (256KB)</td>
</tr>
</tbody></table>
<h4 id='messageretentionsecs'>messageRetentionSecs</h4>
<p>The amount of time for which to retain messages in the queue until they expire, in seconds.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>number (max 1209600 (14 days))</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
<tr>
<td>Default</td>
<td><code>345600</code> (4 days)</td>
</tr>
</tbody></table>
<h4 id='queuepolicy'>queuePolicy</h4>
<p>f specified, will be set as the access policy of the queue when <a href="#squiss-class-methods-queue-methods-createqueue-promise-lt-string-gt">createQueue()</a> is called.<br>
See <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html">the AWS Policy documentation</a> for more
information.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Type</td>
<td>string</td>
</tr>
<tr>
<td>Mandatory</td>
<td>False</td>
</tr>
</tbody></table>
<h2 id='methods'>Methods</h2><h3 id='lifecycle-methods'>Lifecycle Methods</h3><h4 id='start-promise-lt-void-gt'>start(): Promise&lt;void&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">start</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`polling started`</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Starts polling SQS for new messages. Each new message is handed off in the <a href="#squiss-class-events-message-events-message">message</a> event.</p>
<h4 id='stop-soft-boolean-timeout-number-promise-lt-boolean-gt'>stop(soft?: boolean, timeout?: number): Promise&lt;boolean&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`polling stopped`</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Hold on to your hats, this one stops the polling, aborting any in-progress request for new messages.<br>
If called with soft=<code>true</code> while there&#39;s an active request for new messages, the active request will not be 
aborted and the message event may still be fired up to <a href="#squiss-class-constructor-options-polling-options-receivewaittimesecs">receiveWaitTimeSecs</a> afterward.<br>
A Promise will be returned and resolved with <code>true</code> when the queue is completely drained (all messages were handled), 
or <code>false</code> if a <code>timeout</code> value was sent and it passed before the queue was drained.</p>
<h3 id='message-methods'>Message Methods</h3><h4 id='sendmessage-message-object-string-delay-number-attributes-imessageattributes-promise-lt-sqs-types-sendmessageresult-gt'>sendMessage(message: Object | string, delay?: number, attributes?: IMessageAttributes): Promise&lt;SQS.Types.SendMessageResult&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">sendMessage</span><span class="p">({</span><span class="na">a</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span> <span class="kc">undefined</span><span class="p">,</span> <span class="p">{</span><span class="na">correlationId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">my correlation id</span><span class="dl">'</span><span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`message sent with id </span><span class="p">${</span><span class="nx">result</span><span class="p">.</span><span class="nx">MessageId</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">sendMessage</span><span class="p">(</span><span class="dl">'</span><span class="s1">my message data</span><span class="dl">'</span><span class="p">,</span> <span class="mi">5000</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`message sent with id </span><span class="p">${</span><span class="nx">result</span><span class="p">.</span><span class="nx">MessageId</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Sends an individual message to the configured queue, and returns a promise that resolves with AWS&#39;s official message
metadata: an object containing <code>MessageId</code>, <code>MD5OfMessageAttributes</code>, and <code>MD5OfMessageBody</code>.  </p>

<p>Arguments:</p>

<ul>
<li><code>message</code> - The message to push to the queue. If it&#39;s a string, great! If it&#39;s an Object, 
Squiss will call <code>JSON.stringify()</code> on it.</li>
<li><code>delay</code> - The amount of time, in seconds, to wait before making the message available in the queue. 
If not specified, the queue&#39;s configured value will be used.</li>
<li><code>attributes</code>- An optional attributes mapping to associate with the message 
(will be converted to SQS format automatically).<br>
Passing <code>FIFO_MessageDeduplicationId</code> and/or <code>FIFO_MessageGroupId</code> will be removed and converted to the 
<code>MessageDeduplicationId</code> and <code>MessageGroupId</code> message attributes accordingly (needed for FIFO queues). </li>
</ul>

<p>For more information, see <a href="http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/SQS.html#sendMessage-property">the official AWS documentation</a>.</p>
<h4 id='sendmessages-messages-object-string-object-string-delay-number-attributes-imessageattributes-imessageattributes-promise-lt-sqs-types-sendmessagebatchresult-gt'>sendMessages(messages: {Object | string}[] | Object | string, delay?: number, attributes?: IMessageAttributes | IMessageAttributes[]): Promise&lt;SQS.Types.SendMessageBatchResult&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">sendMessage</span><span class="p">([{</span><span class="na">a</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span><span class="mi">2</span><span class="p">}],</span> <span class="kc">undefined</span><span class="p">,</span> <span class="p">{</span><span class="na">correlationId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">my correlation id</span><span class="dl">'</span><span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`message </span><span class="p">${</span><span class="nx">result</span><span class="p">.</span><span class="nx">Successful</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">Id</span><span class="p">}</span><span class="s2"> sent with MessageId </span><span class="p">${</span><span class="nx">result</span><span class="p">.</span><span class="nx">Successful</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">MessageId</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">sendMessage</span><span class="p">([{</span><span class="na">a</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="na">c</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="na">d</span><span class="p">:</span><span class="mi">4</span><span class="p">}],</span> <span class="kc">undefined</span><span class="p">,</span> <span class="p">[{</span><span class="na">correlationId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">my correlation id</span><span class="dl">'</span><span class="p">},</span> <span class="p">{</span><span class="na">correlationId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">my correlation id2</span><span class="dl">'</span><span class="p">}])</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`message </span><span class="p">${</span><span class="nx">result</span><span class="p">.</span><span class="nx">Successful</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">Id</span><span class="p">}</span><span class="s2"> sent with MessageId </span><span class="p">${</span><span class="nx">result</span><span class="p">.</span><span class="nx">Successful</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">MessageId</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Sends an array of any number of messages to the configured SQS queue, breaking them down into appropriate batch 
requests executed in parallel (or as much as the default HTTP agent allows).<br>
It returns a promise that resolves with a response closely aligned to the official AWS SDK&#39;s sendMessageBatch, 
except the results from all batch requests are merged.<br>
The &quot;Id&quot; property supplied in the response will be the index of the message in the original messages array, in string form.  </p>

<p>Arguments:</p>

<ul>
<li><code>messages</code> - The array of messages to push to the queue.
The messages should be either strings, or Objects that Squiss can pass to <code>JSON.stringify()</code>.</li>
<li><code>delay</code> - The amount of time, in seconds, to wait before making the messages available in the queue.
If not specified, the queue&#39;s configured value will be used.</li>
<li><code>attributes</code> - An optional array or single object of attributes mapping to associate with each message
(will be converted to SQS format automatically). </li>
</ul>

<p>For more information, see <a href="http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/SQS.html#sendMessage-property">the official AWS documentation</a>.</p>
<h4 id='changemessagevisibility-message-message-string-timeoutinseconds-number-promise-lt-void-gt'>changeMessageVisibility(message: Message | string,timeoutInSeconds: number): Promise&lt;void&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">changeVisibility</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">5000</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message visibility changed</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Changes the visibility timeout of a message, given either <a href="#message-class">Message</a> object or the receipt handle string.</p>
<h4 id='deletemessage-message-message-promise-lt-void-gt'>deleteMessage(message: Message): Promise&lt;void&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">deleteMessage</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message deleted</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Deletes a <a href="#message-class">Message</a>.<br>
It&#39;s much easier to call <a href="#message-class-methods-del-promise-lt-void-gt">message.del()</a>, but if you need to do it right from the Squiss instance, this is how.  </p>

<aside class="notice">
The message probably won't be deleted immediately - it'll be queued for a batch delete.  
See the <a href="#squiss-class-constructor-options-delete-options">constructor notes</a> for how to configure the specifics of that.
</aside>
<h4 id='handledmessage-message-message-void'>handledMessage(message: Message): void</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">handledMessage</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
</code></pre></div>
<p>Informs Squiss that you got a message that you&#39;re not planning on deleting, so that Squiss can decrement the 
number of &quot;in-flight&quot; messages.<br>
It&#39;s good practice to delete every message you process, but this can be useful in case of error.<br>
You can also call <a href="#message-class-methods-keep-void">message.keep()</a> on the message itself to invoke this.</p>
<h4 id='releasemessage-message-message-promise-lt-void-gt'>releaseMessage(message: Message): Promise&lt;void&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">releaseMessage</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message released</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Releases the given Message object back to the queue by setting its <code>VisibilityTimeout</code> to <code>0</code> and marking the message as
handled internally. You can also call `<a href="#message-class-methods-release-promise-lt-void-gt">message.release()</a> on the message itself to invoke this.</p>
<h3 id='queue-methods'>Queue Methods</h3><h4 id='createqueue-promise-lt-string-gt'>createQueue(): Promise&lt;string&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">createQueue</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">queueUrl</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`created queue </span><span class="p">${</span><span class="nx">queueUrl</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Creates the configured queue.<br>
Returns a promise that resolves with the new queue&#39;s URL when it&#39;s complete.  </p>

<aside class="notice">
This can only be called if you set <a href="#squiss-class-constructor-options-queue-options-queuename">queueName</a> when instantiating Squiss. 
</aside>
<h4 id='deletequeue-promise-lt-void-gt'>deleteQueue(): Promise&lt;void&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">deleteQueue</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">queue deleted</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Deletes the configured queue, returning a promise that resolves on complete.<br>
Squiss lets you do this, even though it makes Squiss useless. Squiss is so selfless.</p>
<h4 id='purgequeue-promise-lt-void-gt'>purgeQueue(): Promise&lt;void&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">purgeQueue</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">queue purged</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Deletes all the messages in a queue and init the in flight state.</p>
<h4 id='getqueueurl-promise-lt-string-gt'>getQueueUrl(): Promise&lt;string&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">getQueueUrl</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">queueUrl</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`queue url is </span><span class="p">${</span><span class="nx">queueUrl</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Returns a Promise that resolves with the URL of the configured queue, even if you only instantiated Squiss with a queueName.<br>
The <a href="#squiss-class-constructor-options-queue-options-correctqueueurl">correctQueueUrl</a> setting applies to this result, if it was set.</p>
<h4 id='getqueuevisibilitytimeout-promise-lt-number-gt'>getQueueVisibilityTimeout(): Promise&lt;number&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">getQueueVisibilityTimeout</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">visibilityTimeout</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`queue visibility timeout in seconds is </span><span class="p">${</span><span class="nx">visibilityTimeout</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Retrieves the <code>VisibilityTimeout</code> (in seconds) set on the target queue.<br>
When a message is received, it has this many seconds to be deleted before it will become available to be received again.</p>
<h4 id='getqueuemaximummessagesize-promise-lt-number-gt'>getQueueMaximumMessageSize(): Promise&lt;number&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">getQueueMaximumMessageSize</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">maxSize</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`queue max message size is </span><span class="p">${</span><span class="nx">maxSize</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Retrieves the max message size (in bytes) set on the target queue.</p>

<aside class="warning">
When a message is sent, it will be rejected if it exceeds that size.
</aside>
<h2 id='events'>Events</h2><h3 id='queue-events'>Queue Events</h3><h4 id='drained'>drained</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">drained</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">no more messages being handled</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when the last in-flight message has been handled, and there are no more messages currently in flight.</p>
<h4 id='queueempty'>queueEmpty</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">queueEmpty</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">no new messages</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when Squiss asks SQS for new messages, and doesn&#39;t get any.</p>
<h4 id='maxinflight-2'>maxInFlight</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">maxInFlight</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">max in flight cap reached</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when Squiss has hit the <a href="#squiss-class-constructor-options-polling-options-maxinflight">maxInFlight</a> cap.<br>
At this point, Squiss won&#39;t retrieve any more messages until at least 1 messages have been handled (e.g. deleted/released/kept).</p>
<h4 id='error-lt-error-gt'>error &lt;<code>Error</code>&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nb">Error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`squiss error </span><span class="p">${</span><span class="nx">error</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted if any of the AWS API calls outright fail.</p>

<aside class="warning">
If you don't have a listener on `error`, per Node.js's structure, the error will be treated as uncaught
and will crash your app.
</aside>
<h4 id='aborted-lt-sqsserviceexception-gt'>aborted &lt;<code>SQSServiceException</code>&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">aborted</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nx">SQSServiceException</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`failed to extend message </span><span class="p">${</span><span class="nx">error</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted if a request for new messages was already in progress while performing a hard <a href="#squiss-class-methods-lifecycle-methods-stop-soft-boolean-timeout-number-promise-lt-boolean-gt">stop()</a>.</p>
<h3 id='message-events'>Message Events</h3><h4 id='message'>message</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="nx">Message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message received</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted every time Squiss pulls a new message from the queue.</p>
<h4 id='delqueued'>delQueued</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">delQueued</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="nx">Message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message queued for deletion</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when a message is queued for deletion, even if delete queuing has been turned off.</p>
<h4 id='handled'>handled</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">handled</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="nx">Message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message was handled</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when a message is handled by any means: deleting, releasing, or calling <a href="#message-class-methods-keep-void">keep()</a>.</p>
<h4 id='released'>released</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">released</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="nx">Message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message released</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted after <a href="#message-class-methods-release-promise-lt-void-gt">release()</a> or <a href="#squiss-class-methods-message-methods-releasemessage-message-message-promise-lt-void-gt">releaseMessage()</a> has been called and the <code>VisibilityTimeout</code> of a message
has successfully been changed to <code>0</code>.<br>
The <a href="#squiss-class-events-message-events-handled">handled</a> event will also be fired for released messages, but that will come earlier, 
when the release function is initially called.</p>
<h4 id='timeoutreached'>timeoutReached</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">timeoutReached</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="nx">Message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message timeout reached</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when a message reaches it&#39;s timeout limit, including any extensions made
with the <a href="#squiss-class-constructor-options-auto-extend-options">autoExtendTimeout</a> feature.</p>
<h4 id='extendingtimeout'>extendingTimeout</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">extendingTimeout</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="nx">Message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">extending message timeout</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when a message <code>VisibilityTimeout</code> is about to be extended with the <a href="#squiss-class-constructor-options-auto-extend-options">autoExtendTimeout</a> feature.</p>
<h4 id='timeoutextended'>timeoutExtended</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">timeoutExtended</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="nx">Message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message timeout was extended</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when a message <code>VisibilityTimeout</code> was extended with the <a href="#squiss-class-constructor-options-auto-extend-options">autoExtendTimeout</a> feature.</p>
<h4 id='keep'>keep</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">keep</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="nx">Message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message kept</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted after <a href="#message-class-methods-keep-void">message.keep()</a> has been called.<br>
This happens when the timeout extender logic has exhausted all of its tries to extend the message visibility.</p>
<h4 id='gotmessages-lt-number-gt'>gotMessages &lt;number&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">gotMessages</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">numOfMessages</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`got </span><span class="p">${</span><span class="nx">numOfMessages</span><span class="p">}</span><span class="s2"> messages`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when Squiss asks SQS for a new batch of messages, and gets some (or one).<br>
Supplies the number of retrieved messages.</p>
<h4 id='deleted-lt-message-message-successid-string-gt'>deleted &lt;<code>{message: Message, successId: string}</code>&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">deleted</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">deletedEvent</span><span class="p">:</span> <span class="nx">IMessageDeletedEventPayload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message deleted</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when a message is confirmed as being successfully deleted from the queue.<br>
The <a href="#squiss-class-events-message-events-handled">handled</a> and <a href="#squiss-class-events-message-events-delqueued">delQueued</a> events will also be fired for deleted messages, but that will come earlier,
when the delete function is initially called.</p>
<h4 id='delerror-lt-message-message-error-batchresulterrorentry-gt'>delError &lt;<code>{message: Message, error: BatchResultErrorEntry}</code>&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">delError</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nx">IMessageDeleteErrorEventPayload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`failed to delete message </span><span class="p">${</span><span class="nx">error</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when the message failed to get deleted.
The object handed to you in this event is the AWS failure object described in the <a href="http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/SQS.html#getQueueUrl-property">SQS deleteMessageBatch documentation</a>.</p>
<h4 id='autoextendfail-lt-message-message-error-sqsserviceexception-gt'>autoExtendFail &lt;<code>{message: Message, error: SQSServiceException}</code>&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">autoExtendFail</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nx">IMessageErrorEventPayload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`failed to extend message </span><span class="p">${</span><span class="nx">error</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted if <a href="#squiss-class-constructor-options-auto-extend-options">autoExtendTimeout</a> feature is enabled, and Squiss attempts to extend the message <code>VisibilityTimeout</code> that has either been
deleted or otherwise expired.</p>
<h4 id='autoextenderror-lt-message-message-error-sqsserviceexception-gt'>autoExtendError &lt;<code>{message: Message, error: SQSServiceException}</code>&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">autoExtendError</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nx">IMessageErrorEventPayload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`failed to extend message </span><span class="p">${</span><span class="nx">error</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted if <a href="#squiss-class-constructor-options-auto-extend-options">autoExtendTimeout</a> feature is enabled, and Squiss failed to extend the message <code>VisibilityTimeout</code>.</p>
<h3 id='s3-events'>S3 Events</h3><h4 id='s3download-lt-message-message-data-bucket-string-key-string-uploadsize-number-gt'>s3Download &lt;<code>{message: Message, data: {bucket: string, key: string, uploadSize: number}}</code>&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">s3Download</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">payload</span><span class="p">:</span> <span class="nx">IMessageS3EventPayload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`downloaded s3 message </span><span class="p">${</span><span class="nx">payload</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">key</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted if <a href="#squiss-class-constructor-options-s3-options">s3Fallback</a> feature is enabled, and a message that was received downloaded its message body from S3.</p>
<h4 id='s3delete-lt-message-message-data-bucket-string-key-string-uploadsize-number-gt'>s3Delete &lt;<code>{message: Message, data: {bucket: string, key: string, uploadSize: number}}</code>&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">s3Delete</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">payload</span><span class="p">:</span> <span class="nx">IMessageS3EventPayload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`deleted s3 message </span><span class="p">${</span><span class="nx">payload</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">key</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted if <a href="#squiss-class-constructor-options-s3-options">s3Fallback</a> feature is enabled, and a message that was received with message body from S3 was deleted.</p>
<h4 id='s3upload-lt-bucket-string-key-string-uploadsize-number-gt'>s3Upload &lt;<code>{bucket: string, key: string, uploadSize: number}</code>&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">s3Upload</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">payload</span><span class="p">:</span> <span class="nx">IS3Upload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`uploaded s3 message </span><span class="p">${</span><span class="nx">payload</span><span class="p">.</span><span class="nx">key</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted if <a href="#squiss-class-constructor-options-s3-options">s3Fallback</a> feature is enabled, and a message that was sent uploaded its body to S3.</p>
<h1 id='message-class'>Message Class</h1><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">squiss</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="nx">Message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">message</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2"> says: </span><span class="p">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">message</span><span class="p">)}</span><span class="s2"> and has attripute p1 with value </span><span class="p">${</span><span class="nx">message</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">p1</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="nx">message</span><span class="p">.</span><span class="nx">del</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>
<p>SQS message handler (<code>EventEmitter</code>)</p>
<h2 id='properties'>Properties</h2>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>raw</code></td>
<td>SQS.Message</td>
<td>The raw SQS message</td>
</tr>
<tr>
<td><code>body</code></td>
<td>string &#124; Object</td>
<td>The parsed body of the message</td>
</tr>
<tr>
<td><code>subject</code></td>
<td>string</td>
<td>The SNS subject</td>
</tr>
<tr>
<td><code>topicArn</code></td>
<td>string</td>
<td>The SNS topic arn</td>
</tr>
<tr>
<td><code>topicName</code></td>
<td>string</td>
<td>The SNS topic name</td>
</tr>
<tr>
<td><code>attributes</code></td>
<td>Object</td>
<td>The user message attributes</td>
</tr>
<tr>
<td><code>sqsAttributes</code></td>
<td>Object</td>
<td>The SQS message attributes</td>
</tr>
</tbody></table>
<h2 id='methods'>Methods</h2><h3 id='parse-promise-lt-string-any-gt'>parse(): Promise&lt;string | any&gt;</h3><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">parse</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">body</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Parses the message and store it in <a href="#message-class-properties">body</a>.<br>
If the user requested to parse the message as json, it will be stored (and returned) as such.<br>
The main purposes of this method are:  </p>

<ul>
<li>Unzip the message, if it was gzipped before it was sent</li>
<li>Fetch the message from S3, if it was stored there before it was sent.

<ul>
<li>Unless otherwise configured, make sure that the message will be deleted from S3 once the message is deleted</li>
</ul></li>
<li>If configured, parse the message as json. </li>
</ul>

<aside class="notice">
You must call this method before handling the message, as the raw message might not be readable yet (e.g. zipped or stored on S3).
</aside>
<h3 id='ishandled-boolean'>isHandled(): boolean</h3><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`message handled? </span><span class="p">${</span><span class="nx">message</span><span class="p">.</span><span class="nx">isHandled</span><span class="p">()}</span><span class="s2">`</span><span class="p">);</span>
</code></pre></div>
<p>Returns <code>true</code> if the message was already handled (e.g. deleted/released/kept)</p>
<h3 id='del-promise-lt-void-gt'>del(): Promise&lt;void&gt;</h3><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">del</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message deleted</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Marks the message as handled and queue the message for deletion.<br>
Returns once the message was deleted from the queue.</p>
<h3 id='keep-void'>keep(): void</h3><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">keep</span><span class="p">();</span>
</code></pre></div>
<p>Marks the message as handled and release the message slot in Squiss (to allow another message to be fetched instead)
while not performing any queue operation on it.</p>

<aside class="warning">
Notice that you can't release or delete the message afterwards!
</aside>
<h3 id='release-promise-lt-void-gt'>release(): Promise&lt;void&gt;</h3><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">release</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message released</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Marks the message as handled and release the message back to the queue (e.g. changes the visibility timeout of the message to 0)<br>
Returns once the message was released back to the queue.</p>
<h3 id='changevisibility-timeoutinseconds-number-promise-lt-void-gt'>changeVisibility(timeoutInSeconds: number): Promise&lt;void&gt;</h3><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">changeVisibility</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message visibility changed</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p>Changes the visibility timeout of the message</p>
<h2 id='events'>Events</h2><h3 id='lifecycle-events'>Lifecycle Events</h3><h4 id='delqueued'>delQueued</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">delQueued</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message queued for deletion</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when a message is queued for deletion, even if delete queuing has been turned off.</p>
<h4 id='handled'>handled</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">handled</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message was handled</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when a message is handled by any means: deleting, releasing, or calling <a href="#message-class-methods-keep-void">keep()</a>.</p>
<h4 id='released'>released</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">released</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message released</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted after <a href="#message-class-methods-keep-void">keep()</a> or <a href="#squiss-class-methods-message-methods-releasemessage-message-message-promise-lt-void-gt">releaseMessage()</a> has been called and the <code>VisibilityTimeout</code> of a message
has successfully been changed to <code>0</code>.<br>
The <a href="#message-class-events-lifecycle-events-handled">handled</a> event will also be fired for released messages, but that will come earlier, 
when the release function is initially called.</p>
<h4 id='keep'>keep</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">keep</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message kept</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted after <a href="#message-class-methods-keep-void">keep()</a> has been called.<br>
This happens when the timeout extender logic has exhausted all of its tries to extend the message visibility.</p>
<h4 id='delerror-lt-batchresulterrorentry-gt'>delError &lt;<code>BatchResultErrorEntry</code>&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">delError</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nx">BatchResultErrorEntry</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`failed to delete message </span><span class="p">${</span><span class="nx">error</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when the message failed to get deleted.
The object handed to you in this event is the AWS failure object described in the <a href="http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/SQS.html#getQueueUrl-property">SQS deleteMessageBatch documentation</a>.</p>
<h4 id='deleted'>deleted</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">deleted</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message deleted</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when a message is confirmed as being successfully deleted from the queue.<br>
The <a href="#message-class-events-lifecycle-events-handled">handled</a> and <a href="#message-class-events-lifecycle-events-delqueued">delQueued</a> events will also be fired for deleted messages, but that will come earlier,
when the delete function is initially called.</p>
<h3 id='timeout-events'>Timeout Events</h3><h4 id='timeoutreached'>timeoutReached</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">timeoutReached</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message timeout reached</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when a message reaches it&#39;s timeout limit, including any extensions made
with the <a href="#squiss-class-constructor-options-auto-extend-options">autoExtendTimeout</a> feature.</p>
<h4 id='extendingtimeout'>extendingTimeout</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">extendingTimeout</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">extending message timeout</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when a message <code>VisibilityTimeout</code> is about to be extended with the <a href="#squiss-class-constructor-options-auto-extend-options">autoExtendTimeout</a> feature.</p>
<h4 id='timeoutextended'>timeoutExtended</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">timeoutExtended</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">message timeout was extended</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted when a message <code>VisibilityTimeout</code> was extended with the <a href="#squiss-class-constructor-options-auto-extend-options">autoExtendTimeout</a> feature.</p>
<h4 id='autoextendfail-lt-sqsserviceexception-gt'>autoExtendFail &lt;<code>SQSServiceException</code>&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">autoExtendFail</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nx">SQSServiceException</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`failed to extend message </span><span class="p">${</span><span class="nx">error</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted if <a href="#squiss-class-constructor-options-auto-extend-options">autoExtendTimeout</a> feature is enabled, and Squiss attempts to extend the message <code>VisibilityTimeout</code> that has either been
deleted or otherwise expired.</p>
<h4 id='autoextenderror-lt-sqsserviceexception-gt'>autoExtendError &lt;<code>SQSServiceException</code>&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">autoExtendError</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nx">SQSServiceException</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`failed to extend message </span><span class="p">${</span><span class="nx">error</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted if <a href="#squiss-class-constructor-options-auto-extend-options">autoExtendTimeout</a> feature is enabled, and Squiss failed to extend the message <code>VisibilityTimeout</code>.</p>
<h3 id='s3-events'>S3 Events</h3><h4 id='s3download-lt-bucket-string-key-string-uploadsize-number-gt'>s3Download &lt;<code>{bucket: string, key: string, uploadSize: number}</code>&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">s3Download</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">payload</span><span class="p">:</span> <span class="nx">IS3Upload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`downloaded s3 message </span><span class="p">${</span><span class="nx">payload</span><span class="p">.</span><span class="nx">key</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted if <a href="#squiss-class-constructor-options-s3-options">s3Fallback</a> feature is enabled, and a message that was received downloaded its message body from S3.</p>
<h4 id='s3delete-lt-bucket-string-key-string-uploadsize-number-gt'>s3Delete &lt;<code>{bucket: string, key: string, uploadSize: number}</code>&gt;</h4><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">message</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">s3Delete</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">payload</span><span class="p">:</span> <span class="nx">IS3Upload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`deleted s3 message </span><span class="p">${</span><span class="nx">payload</span><span class="p">.</span><span class="nx">key</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Emitted if <a href="#squiss-class-constructor-options-s3-options">s3Fallback</a> feature is enabled, and a message that was received with message body from S3 was deleted.</p>
<h1 id='support'>Support</h1>
<p>All support questions and issues should be submitted  <a href="https://github.com/PruvoNet/squiss-ts/issues">here</a></p>
<h1 id='credits'>Credits</h1>
<p>This project is a typescript port (with better performance, bug fixes and new features) of the wonderful and unmaintnaed project <a href="https://www.github.com/TomFrost/Squiss">TomFrost/Squiss</a><br>
Squiss was originally created at <a href="http://www.technologyadvice.com">TechnologyAdvice</a> in Nashville, TN.</p>
<h1 id='contributors'>Contributors</h1>
<aside class="notice">
sorted alphabetically
</aside>

<table><thead>
<tr>
<th style="text-align: center"><a href="https://github.com/dannyrscott"><img alt="dannyrscott" src="https://avatars.githubusercontent.com/u/1838475?v=4&s=117" width="117"></a></th>
<th style="text-align: center"><a href="https://github.com/apps/dependabot"><img alt="dependabot[bot]" src="https://avatars.githubusercontent.com/in/29110?v=4&s=117" width="117"></a></th>
<th style="text-align: center"><a href="https://github.com/apps/greenkeeper"><img alt="greenkeeper[bot]" src="https://avatars.githubusercontent.com/in/505?v=4&s=117" width="117"></a></th>
<th style="text-align: center"><a href="https://github.com/ksafranski"><img alt="ksafranski" src="https://avatars.githubusercontent.com/u/1153376?v=4&s=117" width="117"></a></th>
<th style="text-align: center"><a href="https://github.com/loris"><img alt="loris" src="https://avatars.githubusercontent.com/u/8362?v=4&s=117" width="117"></a></th>
<th style="text-align: center"><a href="https://github.com/apps/mend-bolt-for-github"><img alt="mend-bolt-for-github[bot]" src="https://avatars.githubusercontent.com/in/16809?v=4&s=117" width="117"></a></th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center"><a href="https://github.com/dannyrscott">dannyrscott</a></td>
<td style="text-align: center"><a href="https://github.com/apps/dependabot">dependabot[bot]</a></td>
<td style="text-align: center"><a href="https://github.com/apps/greenkeeper">greenkeeper[bot]</a></td>
<td style="text-align: center"><a href="https://github.com/ksafranski">ksafranski</a></td>
<td style="text-align: center"><a href="https://github.com/loris">loris</a></td>
<td style="text-align: center"><a href="https://github.com/apps/mend-bolt-for-github">mend-bolt-for-github[bot]</a></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th style="text-align: center"><a href="https://github.com/Raiszo"><img alt="Raiszo" src="https://avatars.githubusercontent.com/u/6730653?v=4&s=117" width="117"></a></th>
<th style="text-align: center"><a href="https://github.com/regevbr"><img alt="regevbr" src="https://avatars.githubusercontent.com/u/5775519?v=4&s=117" width="117"></a></th>
<th style="text-align: center"><a href="https://github.com/TomFrost"><img alt="TomFrost" src="https://avatars.githubusercontent.com/u/233541?v=4&s=117" width="117"></a></th>
<th style="text-align: center"><a href="https://github.com/Ugzuzg"><img alt="Ugzuzg" src="https://avatars.githubusercontent.com/u/1078004?v=4&s=117" width="117"></a></th>
<th style="text-align: center"><a href="https://github.com/upugo-dev"><img alt="upugo-dev" src="https://avatars.githubusercontent.com/u/43877476?v=4&s=117" width="117"></a></th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center"><a href="https://github.com/Raiszo">Raiszo</a></td>
<td style="text-align: center"><a href="https://github.com/regevbr">regevbr</a></td>
<td style="text-align: center"><a href="https://github.com/TomFrost">TomFrost</a></td>
<td style="text-align: center"><a href="https://github.com/Ugzuzg">Ugzuzg</a></td>
<td style="text-align: center"><a href="https://github.com/upugo-dev">upugo-dev</a></td>
</tr>
</tbody></table>

<p><strong><a href="https://github.com/PruvoNet/squiss-ts/contributors">Full contributors list</a></strong></p>
<h1 id='changelog'>Changelog</h1>
<p>This project adheres to <a href="http://semver.org/">Semantic Versioning</a>.</p>
<h2 id='development'>Development</h2>
<ul>
<li>nothing yet</li>
</ul>
<h2 id='v5-2-2'>v5.2.2</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v5.2.1...v5.2.2">diff</a></p>
<h3 id='fixed'>Fixed</h3>
<ul>
<li>Stopping a queue should delete all pending messages immediately (#146)</li>
</ul>
<h2 id='v5-2-1'>v5.2.1</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v5.2.0...v5.2.1">diff</a></p>
<h3 id='fixed-2'>Fixed</h3>
<ul>
<li>failed start doesn&#39;t throw (#140)</li>
</ul>
<h2 id='v5-2-0'>v5.2.0</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v5.1.0...v5.2.0">diff</a></p>
<h3 id='added'>Added</h3>
<ul>
<li>upgrade dependencies</li>
</ul>
<h2 id='v5-1-0'>v5.1.0</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v5.0.0...v5.1.0">diff</a></p>
<h3 id='added-2'>Added</h3>
<ul>
<li>support for node 20 (#132)</li>
<li>upgrade dependencies (#130, #131)</li>
</ul>
<h2 id='v5-0-0'>v5.0.0</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.4.1...v5.0.0">diff</a></p>
<h3 id='breaking-changes'>BREAKING CHANGES</h3>
<ul>
<li>Dropped support for Node versions below 16</li>
<li>changed to sqs sdk v3, which breaks some configurations and types - SQS, S3, awsConfig (passing credentials is different)</li>
<li>all <code>AWSError</code> are now <code>SQSServiceException</code></li>
<li>message attributes can&#39;t be Buffer (use Uint8Array instead)</li>
</ul>
<h3 id='fixed-3'>Fixed</h3>
<ul>
<li>xml2js is vulnerable to prototype pollution #128</li>
</ul>
<h3 id='added-3'>Added</h3>
<ul>
<li>Moved to aws sdk v3 #95 (also reduces the dependencies size)</li>
<li>Support for node 19</li>
</ul>
<h2 id='v4-4-1'>v4.4.1</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.4.0...v4.4.1">diff</a></p>
<h3 id='fixed-4'>Fixed</h3>
<ul>
<li>fix #125 - iltorb should not be part of the published package json</li>
</ul>
<h2 id='v4-4-0'>v4.4.0</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.1.1...v4.4.0">diff</a></p>
<h3 id='fixed-5'>Fixed</h3>
<ul>
<li>improved compilation time (#120) thanks @Raiszo for your contribution!</li>
<li>added support for node 18. Thanks @ted-pulsen for noticing and contributing :-)</li>
<li>fixed semver node 6 support (#113)</li>
<li>fixed windows support #110</li>
<li>Stop using travis.ci as it is not free anymore #106</li>
<li>Allow node 16 and test on it #105</li>
</ul>
<h2 id='v4-1-1'>v4.1.1</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.1.0...v4.1.1">diff</a></p>
<h3 id='fixed-6'>Fixed</h3>
<ul>
<li>Change license to apache 2 <a href="https://github.com/PruvoNet/squiss-ts/issues/90">#90</a></li>
<li>Updated dependencies <a href="https://github.com/PruvoNet/squiss-ts/pull/91">#91</a></li>
<li>Added tests for node 14  <a href="https://github.com/PruvoNet/squiss-ts/pull/91">#91</a></li>
</ul>
<h2 id='v4-1-0'>v4.1.0</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.0.10...v4.1.0">diff</a></p>
<h3 id='fixed-7'>Fixed</h3>
<ul>
<li>Consider migrating to the compression built into zlib <a href="https://github.com/PruvoNet/squiss-ts/issues/87">#87</a></li>
</ul>
<h2 id='v4-0-10'>v4.0.10</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.0.9...v4.0.10">diff</a></p>
<h3 id='fixed-8'>Fixed</h3>
<ul>
<li>Updated dependencies <a href="https://github.com/PruvoNet/squiss-ts/issues/81">#81</a></li>
</ul>
<h2 id='v4-0-9'>v4.0.9</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.0.8...v4.0.9">diff</a></p>
<h3 id='fixed-9'>Fixed</h3>
<ul>
<li>Fixed test coverage random breakage [#55(https://github.com/PruvoNet/squiss-ts/issues/55)</li>
<li>Fixed usage of Buffer constructor is deprecated in Node 10 <a href="https://github.com/PruvoNet/squiss-ts/issues/67">#67</a></li>
</ul>
<h2 id='v4-0-8'>v4.0.8</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.0.7...v4.0.8">diff</a></p>
<h3 id='fixed-10'>Fixed</h3>
<ul>
<li>Updated depndencies <a href="https://github.com/PruvoNet/squiss-ts/issues/53">#53</a></li>
<li>Fixed readme broken links <a href="https://github.com/PruvoNet/squiss-ts/issues/53">#53</a></li>
</ul>
<h2 id='v4-0-7'>v4.0.7</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.0.6...v4.0.7">diff</a></p>
<h3 id='fixed-11'>Fixed</h3>
<ul>
<li>UnhandledPromiseRejection when call to SQS deleteMessageBatch rejects <a href="https://github.com/PruvoNet/squiss-ts/issues/50">#50</a></li>
</ul>
<h2 id='v4-0-6'>v4.0.6</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.0.5...v4.0.6">diff</a></p>
<h3 id='fixed-12'>Fixed</h3>
<ul>
<li>Publish only relevant files to npm</li>
</ul>
<h2 id='v4-0-5'>v4.0.5</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.0.4...v4.0.5">diff</a></p>
<h3 id='fixed-13'>Fixed</h3>
<ul>
<li>Removed bad <code>error</code> event on <code>Message</code> class</li>
</ul>
<h2 id='v4-0-4'>v4.0.4</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.0.3...v4.0.4">diff</a></p>
<h3 id='fixed-14'>Fixed</h3>
<ul>
<li>Fixed ailed parse messages is not handled <a href="https://github.com/PruvoNet/squiss-ts/issues/48">#48</a></li>
</ul>
<h2 id='v4-0-3'>v4.0.3</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.0.2...v4.0.3">diff</a></p>
<h3 id='fixed-15'>Fixed</h3>
<ul>
<li>Fixed codeclimate issues</li>
</ul>
<h2 id='v4-0-2'>v4.0.2</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.0.1...v4.0.2">diff</a></p>
<h3 id='fixed-16'>Fixed</h3>
<ul>
<li>Updated npm dependencies</li>
</ul>
<h2 id='v4-0-1'>v4.0.1</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v4.0.0...v4.0.1">diff</a></p>
<h3 id='fixed-17'>Fixed</h3>
<ul>
<li>Fixed failed test in node 6</li>
<li>Removed map files from npm package</li>
<li>Updated npm dependencies</li>
</ul>
<h3 id='added-4'>Added</h3>
<ul>
<li>CI tests for node 12</li>
</ul>
<h2 id='v4-0-0'>v4.0.0</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v3.0.1...v4.0.0">diff</a></p>
<h3 id='fixed-18'>Fixed</h3>
<ul>
<li><a href="#message-class-events-lifecycle-events-delerror-lt-batchresulterrorentry-gt">delError</a> event on the
<a href="#squiss-class">squiss</a> class returns the relevant message handler as well (BREAKING CHANGE)</li>
<li>Fixed type safety of event handling on all classes</li>
<li>Updated npm dependencies</li>
</ul>
<h3 id='added-5'>Added</h3>
<ul>
<li>Moved documentation to <a href="https://squiss-ts.pruvo.com">here</a></li>
<li>Added issue and PR templates</li>
<li>Added a new logo!</li>
<li>Added <a href="#message-class-events-s3-events">S3 related events</a> <a href="https://github.com/PruvoNet/squiss-ts/issues/38">#38</a></li>
</ul>
<h2 id='v3-0-1'>v3.0.1</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v3.0.0...v3.0.1">diff</a></p>
<h3 id='fixed-19'>Fixed</h3>
<ul>
<li>Fixed documentation <a href="https://github.com/PruvoNet/squiss-ts/issues/31">#31</a></li>
</ul>
<h3 id='added-6'>Added</h3>
<ul>
<li>Added <a href="#squiss-class-constructor-options-s3-options-mins3size">minS3Size</a> option to set the min size that will cause upload to S3 <a href="https://github.com/PruvoNet/squiss-ts/issues/33">#33</a></li>
</ul>
<h2 id='v3-0-0'>v3.0.0</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v2.0.0...v3.0.0">diff</a></p>
<h3 id='added-7'>Added</h3>
<ul>
<li>Added missing documentation on the <a href="#message-class-events-timeout-events-timeoutreached">timeoutReached</a> event <a href="https://github.com/PruvoNet/squiss-ts/issues/24">#24</a> (Thanks to <a href="https://github.com/upugo-dev">UpGo</a> for the PR)</li>
<li>Added contributes list</li>
<li>Added typings for all events</li>
<li>Emit event on <a href="#message-class-events-timeout-events-keep">keep</a> - <a href="https://github.com/PruvoNet/squiss-ts/issues/27">#27</a></li>
<li><a href="#squiss-class-events-message-events-deleted-lt-message-message-successid-string-gt">deleted</a> event payload on <a href="#squiss-class">squiss</a> class to also contain the message itself - <a href="https://github.com/PruvoNet/squiss-ts/issues/28">#28</a> (BREAKING CHANGE)</li>
<li><a href="#message-class-events-timeout-events-deleted">deleted</a> event payload on <a href="#message-class">Message</a> class to contain the success id - <a href="https://github.com/PruvoNet/squiss-ts/issues/28">#28</a> (BREAKING CHANGE)</li>
<li>send <a href="#message-class-events-timeout-events-autoextenderror-lt-awserror-gt">autoExtendError</a> event instead of <a href="#squiss-class-events-queue-events-error-lt-error-gt">error</a> event on <a href="#squiss-class">squiss</a> class - <a href="https://github.com/PruvoNet/squiss-ts/issues/28">#28</a> (BREAKING CHANGE)</li>
<li><a href="#squiss-class-events-queue-events-aborted-lt-awserror-gt">aborted</a> event payload on <a href="#squiss-class">squiss</a> class to be the error instance - <a href="https://github.com/PruvoNet/squiss-ts/issues/28">#28</a></li>
</ul>
<h3 id='fixed-20'>Fixed</h3>
<ul>
<li>deduplicate messages in delete batches <a href="https://github.com/PruvoNet/squiss-ts/issues/26">#26</a></li>
</ul>
<h2 id='v2-0-0'>v2.0.0</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v1.5.0...v2.0.0">diff</a></p>

<p>Marking the library as stable after stress usage in a full blown production environment </p>
<h2 id='v1-5-2'>v1.5.2</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v1.5.1...v1.5.2">diff</a></p>
<h3 id='fixed-21'>Fixed</h3>
<ul>
<li><code>deleteMessageBatch</code> causes error <a href="https://github.com/PruvoNet/squiss-ts/issues/20">#20</a></li>
</ul>
<h2 id='v1-5-1'>v1.5.1</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v1.5.0...v1.5.1">diff</a></p>
<h3 id='fixed-22'>Fixed</h3>
<ul>
<li>Timeout extender doesn&#39;t extend message on time <a href="https://github.com/PruvoNet/squiss-ts/issues/22">#22</a></li>
</ul>
<h2 id='v1-5-0'>v1.5.0</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v1.4.0...v1.5.0">diff</a></p>
<h3 id='added-8'>Added</h3>
<ul>
<li>Optionally retain s3 blobs on message delete <a href="https://github.com/PruvoNet/squiss-ts/issues/16">#16</a></li>
<li>Optionally set prefix for s3 blob names <a href="https://github.com/PruvoNet/squiss-ts/issues/15">#15</a></li>
</ul>
<h3 id='fixed-23'>Fixed</h3>
<ul>
<li>Batch messaging to create batches by max of 10 messages, or by max message size <a href="https://github.com/PruvoNet/squiss-ts/issues/14">#14</a></li>
</ul>
<h2 id='v1-4-0'>v1.4.0</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v1.3.0...v1.4.0">diff</a></p>
<h3 id='added-9'>Added</h3>
<ul>
<li>Add ability to control SQS attributes returned and expose them in Message object <a href="https://github.com/PruvoNet/squiss-ts/issues/4">#4</a></li>
<li>Option to auto gzip messages to reduce message sizes <a href="https://github.com/PruvoNet/squiss-ts/issues/5">#5</a></li>
<li>Updated npm packages versions</li>
<li>Add support to auto upload large messages to s3 <a href="https://github.com/PruvoNet/squiss-ts/issues/6">#6</a> (same behaviour like <a href="https://github.com/awslabs/amazon-sqs-java-extended-client-lib">amazon-sqs-java-extended-client-lib</a>)</li>
<li>Add support to define minimum message size to gzip when gzip feature is enabled <a href="https://github.com/PruvoNet/squiss-ts/issues/9">#9</a></li>
</ul>
<h3 id='fixed-24'>Fixed</h3>
<ul>
<li>Batch message sending to handle FIFO message attributes properly</li>
<li>Message properties parser to handle boolean values properly</li>
</ul>
<h2 id='v1-3-0'>v1.3.0</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v1.2.4...v1.3.0">diff</a></p>
<h3 id='added-10'>Added</h3>
<ul>
<li>Expose method to check if message was handled</li>
<li>If message extended time is finished, release the message slot, mark it as handled and emit <a href="#message-class-events-timeout-events-timeoutreached">timeoutReached</a> event</li>
<li>Message is now also event emitter, and all event related to a message will also be emitted on it</li>
<li>Expose SQS typings for direct usage of the underlying SQS instance without adding it as a dependency to your project</li>
<li>Allow to pass <code>MessageGroupId</code> and <code>MessageDeduplicationId</code> FIFO related parameters when sending a message</li>
</ul>
<h3 id='fixed-25'>Fixed</h3>
<ul>
<li>Fix mocha test options</li>
</ul>
<h2 id='v1-2-4'>v1.2.4</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v1.2.3...v1.2.4">diff</a></p>
<h3 id='fixed-26'>Fixed</h3>
<ul>
<li>Fix package.json to point to typing files</li>
</ul>
<h2 id='v1-2-3'>v1.2.3</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v1.2.2...v1.2.3">diff</a></p>
<h3 id='fixed-27'>Fixed</h3>
<ul>
<li>Upgraded npm packages</li>
</ul>
<h2 id='v1-2-2'>v1.2.2</h2>
<p><a href="https://github.com/PruvoNet/squiss-ts/compare/v1.2.1...v1.2.2">diff</a></p>
<h3 id='fixed-28'>Fixed</h3>
<ul>
<li>Upgraded linked-list version to avoid redundant typing files</li>
</ul>
<h2 id='v1-2-1'>v1.2.1</h2><h3 id='fixed-29'>Fixed</h3>
<ul>
<li>Upgraded mocha version to avoid security risks</li>
</ul>
<h2 id='v1-2-0'>v1.2.0</h2><h3 id='added-11'>Added</h3>
<ul>
<li>Support message deletion resolving with Promise</li>
</ul>
<h2 id='v1-1-0'>v1.1.0</h2><h3 id='fixed-30'>Fixed</h3>
<ul>
<li>After stop, don&#39;t pull any more messages</li>
</ul>
<h3 id='added-12'>Added</h3>
<ul>
<li>Added support for customizing the requested message attributes</li>
<li>Stop method now returns promise that will be resolved when queue drains or timeout passes</li>
</ul>
<h2 id='v1-0-0'>v1.0.0</h2><h3 id='added-13'>Added</h3>
<ul>
<li>Ported from <a href="https://www.github.com/TomFrost/Squiss">TomFrost/Squiss</a> v2.2.1 (<strong>no backward compatibility</strong>)</li>
<li>Complete rewrite in typescript</li>
<li>Move to the newest AWS sdk (v2.418.0)</li>
<li>Improve the performance by always filling the handled messages and not waiting for an entire batch size to be fetched</li>
<li>Parse the message attributes into a plain object in send and receive of messages</li>
<li>Added <a href="#squiss-class-methods-queue-methods-purgequeue-promise-lt-void-gt">purge queue</a> capability</li>
<li>Revised the doubly linked list to be used by an external (and lean) library</li>
<li>Deleting a message now returns a promise that will be fulfilled upon success.</li>
<li>Batch messaging now supports attribute map per message</li>
</ul>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
